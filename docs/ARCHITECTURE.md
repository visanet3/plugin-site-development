# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

## ğŸ“ ĞĞ±Ñ‰Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬                         â”‚
â”‚                     (Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ Chrome/Firefox)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP Requests
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (React SPA)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  React Components                                      â”‚ â”‚
â”‚  â”‚  - ExchangePage.tsx (ĞĞ±Ğ¼ĞµĞ½Ğ½Ğ¸Ğº)                        â”‚ â”‚
â”‚  â”‚  - TransactionHistory (Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ)                       â”‚ â”‚
â”‚  â”‚  - Auth Components (Ğ’Ñ…Ğ¾Ğ´/Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ)                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  API Configuration                                     â”‚ â”‚
â”‚  â”‚  src/config/api.ts                                     â”‚ â”‚
â”‚  â”‚  - API_ENDPOINTS                                       â”‚ â”‚
â”‚  â”‚  - createHeaders()                                     â”‚ â”‚
â”‚  â”‚  - apiRequest()                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ fetch(API_ENDPOINTS.*)
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                BACKEND API (Express.js)                      â”‚
â”‚  server/index.js                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  /api/auth/*           Authentication                  â”‚ â”‚
â”‚  â”‚  - POST /register      Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ                     â”‚ â”‚
â”‚  â”‚  - POST /login         Ğ’Ñ…Ğ¾Ğ´                            â”‚ â”‚
â”‚  â”‚  - GET  /user          ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  /api/crypto/*         Crypto Operations               â”‚ â”‚
â”‚  â”‚  - POST /balances              Ğ‘Ğ°Ğ»Ğ°Ğ½ÑÑ‹                 â”‚ â”‚
â”‚  â”‚  - POST /exchange-usdt-to-crypto   USDTâ†’Crypto         â”‚ â”‚
â”‚  â”‚  - POST /exchange-crypto-to-usdt   Cryptoâ†’USDT         â”‚ â”‚
â”‚  â”‚  - POST /withdraw              Ğ’Ñ‹Ğ²Ğ¾Ğ´                   â”‚ â”‚
â”‚  â”‚  - POST /transactions          Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ                 â”‚ â”‚
â”‚  â”‚  - GET  /prices                ĞšÑƒÑ€ÑÑ‹ (Binance)         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  /api/health           Health Check                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ SQL Queries (pg)
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DATABASE (PostgreSQL)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Tables:                                               â”‚ â”‚
â”‚  â”‚  - users                   ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸               â”‚ â”‚
â”‚  â”‚  - transactions            ĞĞ±Ñ‰Ğ¸Ğµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸           â”‚ â”‚
â”‚  â”‚  - crypto_transactions     ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸          â”‚ â”‚
â”‚  â”‚  - withdrawals             Ğ—Ğ°ÑĞ²ĞºĞ¸ Ğ½Ğ° Ğ²Ñ‹Ğ²Ğ¾Ğ´            â”‚ â”‚
â”‚  â”‚  - referral_codes          Ğ ĞµÑ„ĞµÑ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ¾Ğ´Ñ‹           â”‚ â”‚
â”‚  â”‚  - referrals               Ğ ĞµÑ„ĞµÑ€Ğ°Ğ»Ñ‹                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  Ğ¥Ğ¾ÑÑ‚Ğ¸Ğ½Ğ³: Supabase / Railway / Neon / ElephantSQL          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                EXTERNAL API (Binance)                        â”‚
â”‚  https://api.binance.com/api/v3/ticker/price                â”‚
â”‚  - Ğ ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºÑƒÑ€ÑÑ‹ ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²Ğ°Ğ»ÑÑ‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ĞºÑƒÑ€ÑĞ¾Ğ² ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²Ğ°Ğ»ÑÑ‚

```
User â†’ Frontend â†’ API /crypto/prices â†’ Binance API
                           â†“
                    BTC: 104,523 USDT
                    ETH: 3,421 USDT
                    ...
                           â†“
                    Frontend (update UI)
```

### 2. ĞĞ±Ğ¼ĞµĞ½ USDT Ğ½Ğ° Crypto

```
User Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ 100 USDT
       â†“
Frontend Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ POST /crypto/exchange-usdt-to-crypto
  {
    usdt_amount: 100,
    crypto_symbol: "BTC",
    crypto_price: 104523
  }
       â†“
Backend API:
  1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
  2. Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚: 100 / 104523 = 0.00095665 BTC
  3. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ Ğ±Ğ°Ğ»Ğ°Ğ½ÑÑ‹ Ğ² Ğ‘Ğ”:
     - balance = balance - 100
     - btc_balance = btc_balance + 0.00095665
  4. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² transactions
  5. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² crypto_transactions
       â†“
Database ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ
       â†“
Backend Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚: { success: true, crypto_received: 0.00095665 }
       â†“
Frontend Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ UI Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ toast ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ
```

### 3. ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹

```
User Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ²ĞºĞ»Ğ°Ğ´ĞºÑƒ "Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ"
       â†“
Frontend Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ POST /crypto/transactions
  Headers: { X-User-Id: "123" }
       â†“
Backend API:
  1. Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ user_id Ğ¸Ğ· Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ°
  2. Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ SQL Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ:
     SELECT * FROM crypto_transactions 
     WHERE user_id = 123 
     ORDER BY created_at DESC
     LIMIT 100
       â†“
Database Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ 100 Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ñ… Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹
       â†“
Backend Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ JSON
       â†“
Frontend Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ
```

## ğŸ” ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
POST /api/auth/register
  { username, email, password }
       â”‚
       â–¼
Backend:
  1. Ğ¥ĞµÑˆĞ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ (SHA-256)
  2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ username/email
  3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ² Ğ‘Ğ”
  4. Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ñ‚Ğ¾ĞºĞµĞ½
       â”‚
       â–¼
Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚: { success: true, token: "xxx", user: {...} }
       â”‚
       â–¼
Frontend ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ user Ğ² localStorage
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Ğ’Ñ…Ğ¾Ğ´     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
POST /api/auth/login
  { username, password }
       â”‚
       â–¼
Backend:
  1. Ğ¥ĞµÑˆĞ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ
  2. Ğ˜Ñ‰ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ² Ğ‘Ğ”
  3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ is_blocked
  4. Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ñ‚Ğ¾ĞºĞµĞ½
       â”‚
       â–¼
Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚: { success: true, token: "xxx", user: {...} }
       â”‚
       â–¼
Frontend ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ user Ğ² localStorage
```

## ğŸ—„ï¸ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### users
```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  username VARCHAR UNIQUE NOT NULL,
  email VARCHAR UNIQUE NOT NULL,
  password_hash VARCHAR NOT NULL,
  avatar_url TEXT,
  role VARCHAR DEFAULT 'user',
  forum_role VARCHAR,
  balance DECIMAL(20,2) DEFAULT 0,
  btc_balance DECIMAL(20,8) DEFAULT 0,
  eth_balance DECIMAL(20,8) DEFAULT 0,
  bnb_balance DECIMAL(20,8) DEFAULT 0,
  sol_balance DECIMAL(20,8) DEFAULT 0,
  xrp_balance DECIMAL(20,8) DEFAULT 0,
  trx_balance DECIMAL(20,8) DEFAULT 0,
  is_blocked BOOLEAN DEFAULT FALSE,
  is_verified BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### crypto_transactions
```sql
CREATE TABLE crypto_transactions (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL,
  transaction_type VARCHAR(20) NOT NULL,  -- 'buy', 'sell', 'withdraw'
  crypto_symbol VARCHAR(10) NOT NULL,     -- 'BTC', 'ETH', etc.
  amount DECIMAL(20,8) NOT NULL,          -- ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²Ğ°Ğ»ÑÑ‚Ñ‹
  price DECIMAL(20,2) NOT NULL,           -- Ğ¦ĞµĞ½Ğ° Ğ·Ğ° ĞµĞ´Ğ¸Ğ½Ğ¸Ñ†Ñƒ Ğ² USDT
  total DECIMAL(20,2) NOT NULL,           -- ĞĞ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° Ğ² USDT
  status VARCHAR(20) DEFAULT 'completed', -- 'completed', 'pending', 'cancelled'
  wallet_address TEXT,                    -- ĞĞ´Ñ€ĞµÑ Ğ´Ğ»Ñ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ°
  created_at TIMESTAMP DEFAULT NOW()
);
```

### transactions
```sql
CREATE TABLE transactions (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL,
  amount DECIMAL(20,2) NOT NULL,
  type VARCHAR(50) NOT NULL,  -- 'deposit', 'withdrawal', 'exchange', 'bet', 'win'
  description TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);
```

## ğŸ“Š API Request/Response Examples

### GET /api/crypto/prices

**Request:**
```http
GET /api/crypto/prices HTTP/1.1
Host: localhost:3001
```

**Response:**
```json
{
  "success": true,
  "buy_prices": {
    "BTC": 106653.46,
    "ETH": 3489.54,
    "BNB": 714.28,
    "SOL": 163.26,
    "XRP": 3.17,
    "TRX": 0.2499
  },
  "sell_prices": {
    "BTC": 102400.54,
    "ETH": 3351.46,
    "BNB": 685.72,
    "SOL": 156.74,
    "XRP": 3.04,
    "TRX": 0.2401
  }
}
```

### POST /api/crypto/exchange-usdt-to-crypto

**Request:**
```http
POST /api/crypto/exchange-usdt-to-crypto HTTP/1.1
Host: localhost:3001
Content-Type: application/json
X-User-Id: 123

{
  "usdt_amount": 100,
  "crypto_symbol": "BTC",
  "crypto_price": 106653.46
}
```

**Response:**
```json
{
  "success": true,
  "crypto_received": 0.00093747
}
```

### POST /api/crypto/transactions

**Request:**
```http
POST /api/crypto/transactions HTTP/1.1
Host: localhost:3001
Content-Type: application/json
X-User-Id: 123
```

**Response:**
```json
{
  "success": true,
  "transactions": [
    {
      "id": 1,
      "transaction_type": "buy",
      "crypto_symbol": "BTC",
      "amount": "0.00093747",
      "price": "106653.46",
      "total": "100.00",
      "status": "completed",
      "wallet_address": null,
      "created_at": "2025-01-14T12:00:00.000Z"
    }
  ]
}
```

## ğŸš€ Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Developer  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  localhost:5173         â”‚  Frontend (Vite dev server)
â”‚  â†“ API calls            â”‚
â”‚  localhost:3001/api     â”‚  Backend (Express)
â”‚  â†“ SQL queries          â”‚
â”‚  PostgreSQL (remote)    â”‚  Database (Supabase/Railway)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸÑ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½ Ğ½Ğ° Vercel + Railway

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Users    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  your-app.vercel.app    â”‚  Frontend (Static files)
â”‚  â†“ API calls            â”‚
â”‚  your-api.railway.app   â”‚  Backend (Express)
â”‚  â†“ SQL queries          â”‚
â”‚  PostgreSQL (Railway)   â”‚  Database
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”’ Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¿Ğ°Ñ€Ğ¾Ğ»ĞµĞ¹
```
User password: "mypassword"
       â†“
SHA-256 hash
       â†“
"5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8"
       â†“
Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ² Ğ‘Ğ”
```

### Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ SQL Ğ¸Ğ½ÑŠĞµĞºÑ†Ğ¸Ğ¹
```javascript
// âŒ ĞĞŸĞĞ¡ĞĞ (Ğ½Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼)
query(`SELECT * FROM users WHERE id = ${userId}`);

// âœ… Ğ‘Ğ•Ğ—ĞĞŸĞĞ¡ĞĞ (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼)
query(`SELECT * FROM users WHERE id = $1`, [userId]);
```

### CORS Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°
```javascript
app.use(cors({
  origin: process.env.FRONTEND_URL,  // Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ°Ñˆ Ğ´Ğ¾Ğ¼ĞµĞ½
  credentials: true
}));
```

## ğŸ“ˆ ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (ĞœĞ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚)
```
Frontend â†’ API Server â†’ Database
```

### Ğ‘ÑƒĞ´ÑƒÑ‰ĞµĞµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹)
```
Frontend â†’ API Gateway
              â”œâ†’ Auth Service â†’ Database
              â”œâ†’ Crypto Service â†’ Database
              â”œâ†’ Transaction Service â†’ Database
              â””â†’ Price Service â†’ Binance API
```

---

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ° Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ğ¾Ñ‚ poehali.dev**
